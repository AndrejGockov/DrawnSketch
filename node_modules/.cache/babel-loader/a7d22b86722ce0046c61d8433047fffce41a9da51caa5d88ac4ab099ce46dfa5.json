{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\Programming\\\\End of The Year Project\\\\SketchNDraw\\\\src\\\\pages\\\\canvas\\\\Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useContext } from \"react\";\n\n// import { useCanvas } from \"./CanvasContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Canvas = () => {\n  _s();\n  const canvasRef = useRef(null);\n  const contextRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  // const downloadDrawing = useRef(null);\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    canvas.width = 800;\n    canvas.height = 400;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.mozImageSmoothingEnabled = false;\n    ctx.imageSmoothingEnabled = false;\n    ctx.lineCap = \"round\";\n    ctx.strokeStyle = \"black\";\n    ctx.lineWidth = 5;\n    contextRef.current = ctx;\n  }, []);\n  const startDrawing = _ref => {\n    let {\n      nativeEvent\n    } = _ref;\n    setIsDrawing(true);\n    const {\n      offsetX,\n      offsetY\n    } = nativeEvent;\n    // console.log(offsetX + \" \" + offsetY);\n\n    contextRef.current.beginPath();\n    contextRef.current.moveTo(offsetX, offsetY);\n    contextRef.current.stroke();\n    // nativeEvent.preventDefault();\n  };\n\n  const Drawing = _ref2 => {\n    let {\n      nativeEvent\n    } = _ref2;\n    if (!isDrawing) {\n      return;\n    } else {\n      const {\n        offsetX,\n        offsetY\n      } = nativeEvent;\n      console.log(offsetX + \" \" + offsetY);\n      contextRef.current.lineTo(offsetX, offsetY);\n      contextRef.current.stroke();\n      // nativeEvent.preventDefault();\n    }\n    // const { offsetX, offsetY } = nativeEvent;\n    // console.log(offsetX + \" \" + offsetY);\n  };\n\n  const stopDrawing = () => {\n    setIsDrawing(false);\n    contextRef.current.closePath();\n  };\n  function mobileDrawing(_ref3) {\n    let {\n      nativeEvent\n    } = _ref3;\n    var touch = nativeEvent.touches[0];\n    let mouseEvent = new MouseEvent(\"mousemove\", {\n      clientX: touch.clientX,\n      clientY: touch.clientY\n    });\n    canvasRef.current.dispatchEvent(mouseEvent);\n    // startDrawing();\n  }\n\n  const setToDraw = () => {\n    contextRef.current.globalCompositeOperation = \"source-over\";\n  };\n  const setToErase = () => {\n    contextRef.current.globalCompositeOperation = \"destination-out\";\n  };\n\n  // const downloadDrawing = (event) => {\n  //   let link = event.currentTarget;\n  //   // link.download = \"download.png\";\n  //   link.setAttribute(\"download\", \"SketchNDraw.png\");\n  //   let image = canvasRef.current.toDataURL(\"image/png\");\n  //   link.setAttribute(\"href\", image);\n  // };\n\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    id: \"canvas\",\n    onMouseDown: startDrawing,\n    onMouseMove: Drawing,\n    onMouseUp: stopDrawing,\n    onMouseLeave: stopDrawing,\n    onTouchStart: startDrawing,\n    onTouchMove: mobileDrawing\n    // onTouc={stopDrawing}\n    ,\n    ref: canvasRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n// export const downloadDrawing = (event) => {\n//   // canvasRef.current = canvasRef\n//   let link = event.currentTarget;\n//   // link.download = \"download.png\";\n//   link.setAttribute(\"download\", \"SketchNDraw.png\");\n//   let image = canvasRef.current.toDataURL(\"image/png\");\n//   link.setAttribute(\"href\", image);\n// };\n_s(Canvas, \"gX+PwV6uGFVV0Nk+m7BEZwABNTU=\");\n_c = Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useContext","Canvas","canvasRef","contextRef","isDrawing","setIsDrawing","canvas","current","width","height","ctx","getContext","mozImageSmoothingEnabled","imageSmoothingEnabled","lineCap","strokeStyle","lineWidth","startDrawing","nativeEvent","offsetX","offsetY","beginPath","moveTo","stroke","Drawing","console","log","lineTo","stopDrawing","closePath","mobileDrawing","touch","touches","mouseEvent","MouseEvent","clientX","clientY","dispatchEvent","setToDraw","globalCompositeOperation","setToErase"],"sources":["C:/Users/Admin/Documents/Programming/End of The Year Project/SketchNDraw/src/pages/canvas/Canvas.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useContext } from \"react\";\r\n\r\n// import { useCanvas } from \"./CanvasContext\";\r\n\r\nexport const Canvas = () => {\r\n  const canvasRef = useRef(null);\r\n  const contextRef = useRef(null);\r\n\r\n  const [isDrawing, setIsDrawing] = useState(false);\r\n  // const downloadDrawing = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    canvas.width = 800;\r\n    canvas.height = 400;\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.mozImageSmoothingEnabled = false;\r\n    ctx.imageSmoothingEnabled = false;\r\n    ctx.lineCap = \"round\";\r\n    ctx.strokeStyle = \"black\";\r\n    ctx.lineWidth = 5;\r\n    contextRef.current = ctx;\r\n  }, []);\r\n\r\n  const startDrawing = ({ nativeEvent }) => {\r\n    setIsDrawing(true);\r\n\r\n    const { offsetX, offsetY } = nativeEvent;\r\n    // console.log(offsetX + \" \" + offsetY);\r\n\r\n    contextRef.current.beginPath();\r\n    contextRef.current.moveTo(offsetX, offsetY);\r\n    contextRef.current.stroke();\r\n    // nativeEvent.preventDefault();\r\n  };\r\n\r\n  const Drawing = ({ nativeEvent }) => {\r\n    if (!isDrawing) {\r\n      return;\r\n    } else {\r\n      const { offsetX, offsetY } = nativeEvent;\r\n      console.log(offsetX + \" \" + offsetY);\r\n\r\n      contextRef.current.lineTo(offsetX, offsetY);\r\n      contextRef.current.stroke();\r\n      // nativeEvent.preventDefault();\r\n    }\r\n    // const { offsetX, offsetY } = nativeEvent;\r\n    // console.log(offsetX + \" \" + offsetY);\r\n  };\r\n\r\n  const stopDrawing = () => {\r\n    setIsDrawing(false);\r\n    contextRef.current.closePath();\r\n  };\r\n\r\n  function mobileDrawing({ nativeEvent }) {\r\n    var touch = nativeEvent.touches[0];\r\n    let mouseEvent = new MouseEvent(\"mousemove\", {\r\n      clientX: touch.clientX,\r\n      clientY: touch.clientY,\r\n    });\r\n    canvasRef.current.dispatchEvent(mouseEvent);\r\n    // startDrawing();\r\n  }\r\n\r\n  const setToDraw = () => {\r\n    contextRef.current.globalCompositeOperation = \"source-over\";\r\n  };\r\n\r\n  const setToErase = () => {\r\n    contextRef.current.globalCompositeOperation = \"destination-out\";\r\n  };\r\n\r\n  // const downloadDrawing = (event) => {\r\n  //   let link = event.currentTarget;\r\n  //   // link.download = \"download.png\";\r\n  //   link.setAttribute(\"download\", \"SketchNDraw.png\");\r\n  //   let image = canvasRef.current.toDataURL(\"image/png\");\r\n  //   link.setAttribute(\"href\", image);\r\n  // };\r\n\r\n  return (\r\n    <canvas\r\n      id=\"canvas\"\r\n      onMouseDown={startDrawing}\r\n      onMouseMove={Drawing}\r\n      onMouseUp={stopDrawing}\r\n      onMouseLeave={stopDrawing}\r\n      onTouchStart={startDrawing}\r\n      onTouchMove={mobileDrawing}\r\n      // onTouc={stopDrawing}\r\n      ref={canvasRef}\r\n    />\r\n  );\r\n};\r\n\r\n// export const downloadDrawing = (event) => {\r\n//   // canvasRef.current = canvasRef\r\n//   let link = event.currentTarget;\r\n//   // link.download = \"download.png\";\r\n//   link.setAttribute(\"download\", \"SketchNDraw.png\");\r\n//   let image = canvasRef.current.toDataURL(\"image/png\");\r\n//   link.setAttribute(\"href\", image);\r\n// };\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}